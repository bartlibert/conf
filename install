#!/bin/bash

confdir=$(dirname $0)
files="bash_logout
       bashrc
       conkyrc
       crawlrc
       gtkrc
       inputrc
       nethackrc
       screenrc
       vimrc
       Xdefaults
       bin
       irssi
       fortune
       vim"

function install() {
    if [[ -e "$2" && ! -h "$2" ]]; then
        mv "$2" "$2.bak"
    fi
    target="$confdir/$1"
    tmp=$(dirname $2)
    if [[ "$tmp" != '.' ]]; then
        for i in ${tmp//\// }; do
            target="../$target"
        done
    fi
    mkdir -p $(dirname $2)
    ln -sf "$target" "$2"
}

for file in $files; do
    install "${file}" ".${file}"
done
install repl.rc .re.pl/repl.rc
install authorized_keys .ssh/authorized_keys
